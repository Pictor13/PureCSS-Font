function switcher(e){var t,e=e;return 8==e||6==e?t='<i class="AZ sp"></i></i><i class="azwd">':13===e?t='<i class="AZ sp"></i></i><br><i class="azwd">':(className="_"+e,t='<i class="AZ '+className+'"></i>'),t}function runCoder(){codehtml.style.display="block",window.scrollTo(0,codehtml.offsetTop);var e=texteditor.outerHTML.replace(/<div id="cursorline"><\/div>/,"").replace(/ id="texteditor"/,"").replace(/ class="selected"/,"").replace(/<i class="azwd"><\/i>/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;([a-zA-Z]) (.*?)="(.*?)"/g,'&lt;<em class="el">$1</em> <em class="cl">$2</em>="<em class="nm">$3</em>"').replace(/&lt;span/g,'&lt;<em class="el">span</em>').replace(/&lt;\/(.*?)&gt;/g,'&lt;/<em class="el">$1</em>&gt;').replace(/data(.*?)="(.*?)"/g,'<em class="cl">data$1</em>="<em class="nm">$2</em>"').replace(/style="(.*?)"/g,'<em class="cl">style</em>="<em class="nm">$1</em>"');codearea.innerHTML=e}function changeFontColor(){texteditor.style.color=fontcolor.value,runCoder()}function changeBackgroundColor(){texteditor.style.backgroundColor=backgroundcolor.value,runCoder()}function changeFontSize(){texteditor.style.fontSize=fontsize.value+"px"}document.body.addEventListener("keydown",function(e){if(e=e||window.event,"focused"===texteditor.className&&e.keyCode)if(8==e.keyCode||46==e.keyCode){e.preventDefault();var t=cursorline.previousElementSibling;if(null!==t)t.parentNode.removeChild(t);else{var a=cursorline.parentNode.previousElementSibling,r=a.querySelectorAll(".sp")[0];cursorline.parentNode.removeChild(cursorline),r.parentNode.removeChild(r),a.insertAdjacentHTML("beforeend",'<div id="cursorline"></div>')}}else if(13===e.keyCode){e.preventDefault();var l=cursorline.parentNode;cursorline.parentNode.removeChild(cursorline),l.insertAdjacentHTML("afterend",'<br><i class="azwd"><div id="cursorline"></div></i>')}}),document.body.addEventListener("keypress",function(e){e=e||window.event;var t=e.which||e.keyCode;if("focused"===texteditor.className)if(cursorline.insertAdjacentHTML("beforebegin",switcher(t)),32===t){e.preventDefault();var a=cursorline.parentNode;cursorline.parentNode.removeChild(cursorline),a.insertAdjacentHTML("afterend",'<i class="azwd"><div id="cursorline"></div></i>')}else 13===t&&(insertion=wordbreak)}),document.body.addEventListener("click",function(e){if("texteditor"===e.target.id||"texteditor"===e.target.parentNode.id?texteditor.className="focused":texteditor.className="","BUTTON"===e.target.tagName&&e.target.attributes){if(e.target.attributes["data-stb"]){var t=e.target.attributes["data-az-style"].nodeValue;"selected"===e.target.className?(texteditor.setAttribute("data-az-"+t,"false"),e.target.className=""):(texteditor.setAttribute("data-az-"+t,"true"),e.target.className="selected")}if(e.target.attributes["data-az-align"]){var a=e.target.attributes["data-az-align"].nodeValue;Array.prototype.forEach.call(document.querySelectorAll("button[data-az-align]"),function(e,t){e.className=""}),texteditor.setAttribute("data-az-align",a),e.target.className="selected"}}});