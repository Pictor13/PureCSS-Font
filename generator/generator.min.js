var cursorHTML='<div id="cursorline"></div>',clickPressed=!1,selectMode=!1;function listenToKeys(e){if("focused"===result.className)if(8==e){Array.prototype.forEach.call(document.querySelectorAll(".azwd"),function(e,r){0===e.childNodes.length&&e.parentNode.removeChild(e)});var r=cursorline.previousElementSibling;if(null!==r&&void 0!==r)r.parentNode.removeChild(r);else{var t,o,l=cursorline.parentNode.previousElementSibling;"azwd"===l.className?(t=l,(o=l.querySelectorAll("._32")[0])&&o.parentNode.removeChild(o)):"BR"===l.tagName&&(o=(t=l.previousElementSibling).querySelectorAll("._32")[0],l.parentNode.removeChild(l),o&&o.parentNode.removeChild(o)),cursorline.parentNode.removeChild(cursorline),t.insertAdjacentHTML("beforeend",cursorHTML)}}else if(13===e){event.preventDefault();var n=cursorline.parentNode;cursorline.parentNode.removeChild(cursorline),n.insertAdjacentHTML("afterend",'<br><i class="azwd">'+cursorHTML+"</i>")}else if(32===e){var i=cursorline.parentNode;if(i.lastElementChild!==cursorline){var a=i.outerHTML.split(cursorHTML);i.outerHTML=a[0]+'<i class="AZ _32"></i></i><i class="azwd">'+cursorHTML+a[1]+"</i>"}else cursorline.insertAdjacentHTML("beforebegin",switcher(e)),cursorline.parentNode.removeChild(cursorline),i.insertAdjacentHTML("afterend",'<i class="azwd">'+cursorHTML+"</i>")}else cursorline.insertAdjacentHTML("beforebegin",switcher(e))}function arrowKeyFunctions(e){if("focused"===result.className)switch(e){case 37:if(cursorline.previousElementSibling){var r=cursorline.previousElementSibling;cursorline.parentNode.removeChild(cursorline),r.insertAdjacentHTML("beforebegin",cursorHTML)}else if(cursorline.parentNode.previousElementSibling){r=cursorline.parentNode.previousElementSibling;priorSpace=r.querySelectorAll("._32")[0],cursorline.parentNode.removeChild(cursorline),priorSpace.insertAdjacentHTML("beforebegin",cursorHTML)}break;case 39:if(cursorline.nextElementSibling){var t=cursorline.nextElementSibling;cursorline.parentNode.removeChild(cursorline),t.insertAdjacentHTML("afterend",cursorHTML)}else if(cursorLine.parentNode.nextElementSibling){t=cursorline.parentNode.nextElementSibling;cursorline.parentNode.removeChild(cursorline),t.insertAdjacentHTML("afterend",cursorHTML)}break;case 38:cursorline.parentNode.removeChild(cursorline),texteditor.insertAdjacentHTML("afterbegin");break;case 40:cursorline.parentNode.removeChild(cursorline),texteditor.insertAdjacentHTML("beforeend")}}function switcher(e){var r;return 8===(e=e)?r='<i class="AZ sp"></i></i><br><i class="azwd">':(className="_"+e,r='<i class="AZ '+className+'"></i>'),r}function runCoder(){codehtml.style.display="block",window.scrollTo(0,codehtml.offsetTop);var e=texteditor.outerHTML.replace(/<div id="cursorline"><\/div>/,"").replace(/ id="texteditor"/,"").replace(/ class="focused"/,"").replace(/ data-azselect="(.*?)"/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/=/g,"&#61;").replace(/"/g,"&quot;").replace(/&lt;(.[a-z0-9]*)/g,'&lt;<em class="el">$1</em>').replace(/&lt;\/(.[a-z0-9]*)/g,'&lt;/<em class="el">$1</em>').replace(/&#61;&quot;(.*?)&quot;/g,'&#61;&quot;<em class="nm">$1</em>&quot;').replace(/ (.[a-z\-]*)&#61;/g,' <em class="cl">$1</em>&#61;');codearea.innerHTML=e}function changeFontColor(){texteditor.style.color=fontcolor.value}function changeBackgroundColor(){texteditor.style.backgroundColor=backgroundcolor.value}function changeFontSize(){texteditor.style.fontSize=fontsize.value+"px"}document.body.addEventListener("keydown",function(e){var r=e.keyCode;8===r||13===r||46===r?(e.preventDefault(),listenToKeys(46===r?8:r)):r>=37&&r<=40&&arrowKeyFunctions(r)}),document.body.addEventListener("keyup",function(e){listenToKeys(e.charCode||e.keyCode)}),document.body.addEventListener("paste",function(e){e.stopPropagation(),e.preventDefault();for(var r=e.clipboardData.getData("Text"),t=0;t<r.length;t++)listenToKeys(r.charCodeAt(t))}),document.body.addEventListener("click",function(e){if("texteditor"===e.target.id||"result"===e.target.id?(result.className="focused",cursorline.parentNode.removeChild(cursorline),texteditor.lastElementChild.insertAdjacentHTML("beforeend",cursorHTML),Array.prototype.forEach.call(document.querySelectorAll(".AZ"),function(e,r){e.setAttribute("data-azselect","false")})):result.className="","I"===e.target.tagName&&0===e.target.className.indexOf("AZ")&&(result.className="focused",selectMode=!selectMode,clickPressed=!clickPressed,cursorline.parentNode.removeChild(cursorline),e.target.insertAdjacentHTML("beforebegin",cursorHTML)),"BUTTON"===e.target.tagName&&e.target.attributes&&e.target.attributes["data-stb"]){var r=e.target.attributes["data-az-style"].nodeValue;"selected"===e.target.className?(texteditor.setAttribute("data-"+r,"0"),e.target.className=""):(texteditor.setAttribute("data-"+r,"1"),e.target.className="selected")}});