function listenToKeys(e){if("focused"===texteditor.className)if(8==e||46==e){var t=cursorline.previousElementSibling;if(null!==t&&void 0!==t)t.parentNode.removeChild(t);else{var r,a,o=cursorline.parentNode.previousElementSibling;"azwd"===o.className?(r=o,a=o.querySelectorAll("._32")[0],a.parentNode.removeChild(a)):"BR"===o.tagName&&(r=o.previousElementSibling,a=r.querySelectorAll("._32")[0],o.parentNode.removeChild(o)),cursorline.parentNode.removeChild(cursorline),r.insertAdjacentHTML("beforeend",cursorHTML)}}else if(13===e){event.preventDefault();var i=cursorline.parentNode;cursorline.parentNode.removeChild(cursorline),i.insertAdjacentHTML("afterend",'<br><i class="azwd">'+cursorHTML+"</i>")}else if(32===e){event.preventDefault();var s=cursorline.parentNode;if(s.lastElementChild!==cursorline){var n=s.outerHTML.split(cursorHTML);window.console.log(n[1]),s.outerHTML=n[0]+'<i class="AZ _32"></i></i><i class="azwd">'+cursorHTML+n[1]+"</i>"}else cursorline.insertAdjacentHTML("beforebegin",switcher(e)),cursorline.parentNode.removeChild(cursorline),s.insertAdjacentHTML("afterend",'<i class="azwd">'+cursorHTML+"</i>")}else cursorline.insertAdjacentHTML("beforebegin",switcher(e))}function arrowKeyFunctions(e){if("focused"===texteditor.className){var t=cursorline.nextElementSibling,r=cursorline.previousElementSibling;cursorline.parentNode.removeChild(cursorline);switch(e){case 37:r.insertAdjacentHTML("beforebegin",cursorHTML);break;case 38:texteditor.insertAdjacentHTML("afterbegin");break;case 39:t.insertAdjacentHTML("afterend",cursorHTML);break;case 40:texteditor.insertAdjacentHTML("beforeend")}}}function switcher(e){var t,e=e;return 8===e||46==e?t='<i class="AZ sp"></i></i><br><i class="azwd">':(className="_"+e,t='<i class="AZ '+className+'"></i>'),t}function runCoder(){codehtml.style.display="block",window.scrollTo(0,codehtml.offsetTop);var e=texteditor.outerHTML.replace(/<div id="cursorline"><\/div>/,"").replace(/ id="texteditor"/,"").replace(/ class="selected"/,"").replace(/<i class="azwd"><\/i>/g,"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/=/g,"&#61;").replace(/"/g,"&quot;").replace(/&lt;(.[a-z0-9]*)/g,'&lt;<em class="el">$1</em>').replace(/&lt;\/(.[a-z0-9]*)/g,'&lt;/<em class="el">$1</em>').replace(/&#61;&quot;(.*?)&quot;/g,'&#61;&quot;<em class="nm">$1</em>&quot;').replace(/ (.[a-z\-]*)&#61;/g,' <em class="cl">$1</em>&#61;');codearea.innerHTML=e}function changeFontColor(){texteditor.style.color=fontcolor.value}function changeBackgroundColor(){texteditor.style.backgroundColor=backgroundcolor.value}function changeFontSize(){texteditor.style.fontSize=fontsize.value+"px"}var cursorHTML='<div id="cursorline"></div>';document.body.addEventListener("keydown",function(e){var t=e.keyCode;8===t||13===t||46===t?(e.preventDefault(),listenToKeys(t)):t>=37&&t<=40&&arrowKeyFunctions(t)}),document.body.addEventListener("keypress",function(e){listenToKeys(e.keyCode)}),document.body.addEventListener("paste",function(e){e.stopPropagation(),e.preventDefault();for(var t=e.clipboardData.getData("Text"),r=0;r<t.length;r++)listenToKeys(t.charCodeAt(r))}),document.body.addEventListener("click",function(e){if("texteditor"===e.target.id?(texteditor.className="focused",cursorline.parentNode.removeChild(cursorline),texteditor.lastElementChild.insertAdjacentHTML("beforeend",cursorHTML)):texteditor.className="","I"===e.target.tagName&&0===e.target.className.indexOf("AZ")&&(texteditor.className="focused",cursorline.parentNode.removeChild(cursorline),e.target.insertAdjacentHTML("beforebegin",cursorHTML)),"BUTTON"===e.target.tagName&&e.target.attributes){if(e.target.attributes["data-stb"]){var t=e.target.attributes["data-az-style"].nodeValue;"selected"===e.target.className?(texteditor.setAttribute("data-az-"+t,"false"),e.target.className=""):(texteditor.setAttribute("data-az-"+t,"true"),e.target.className="selected")}if(e.target.attributes["data-az-align"]){var r=e.target.attributes["data-az-align"].nodeValue;Array.prototype.forEach.call(document.querySelectorAll("button[data-az-align]"),function(e,t){e.className=""}),texteditor.setAttribute("data-az-align",r),e.target.className="selected"}}});